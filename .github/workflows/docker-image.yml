name: CI
on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    # steps:
    #       - uses: actions/checkout@v2
    #       - name: Setup Node.js
    #         uses: actions/setup-node@v2
    #         with:
    #           node-version: '20.10.0'
    #           npm-version: '10.2.3'
    #       - name: Install Dependencies
    #         run: npm install
    #       - name: Install Jest Globally
    #         run: npm install -g jest
    #       - name: Run Jest Tests
    #         run: npm run test:jest
    #       - name: Run Storybook Tests
    #         run: npm run test:storybook

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Build Docker image
        run: docker build -t myapp-test .

      - name: Run Jest tests in Docker
        run: docker run --rm myapp-test npm run test:jest

      - name: Run Storybook tests in Docker
        run: docker run --rm myapp-test npm run test:storybook